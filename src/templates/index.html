<!DOCTYPE html>
<head>
    <title>Tubes Algeo 2: Content-Based Information Retrieval</title>
</head>
<body>
    <nav>
        <a href="home">Home</a>
        <a href="index">Program</a>
        <a href="about-us">About Us</a>
    </nav>
    <div>
        <h1>Tubes Algeo 2: Content-Based Information Retrieval</h1>
        <form method="POST" enctype="multipart/form-data">
            <p>Input folder dataset:</p>
            <input type="file" name="folder_dataset" webkitdirectory multiple />
            {% if error_dataset_empty %}
            <p style="color: red; margin: 2px;">Folder dataset belum diupload!</p>
            {% endif %}
            <p>
            <p>Input query:</p>
            <input type="file" name="query_img"><br>
            {% if error_query_empty %}
            <p style="color: red; margin: 2px;">Query belum diupload!</p>
            {% endif %}
            <br>
            <input type="checkbox" id="1" name="cbir-by-texture" value="0">
            <label for="cbir-by-texture">CBIR by: color (off), texture (on)</label><br>
            <br>
            <input type="submit">
        </form>
        <h2>Query:</h2>
        {% if query_path %}
        <img src="{{url_for('static', filename='query/'+query_path)}}" width="300px">
        {% endif %}
        <h2>Results:</h2>
        {% if scores %}
        <p>{{img_count}} images in {{time}} seconds</p>
        <div style="display: flex; flex-wrap: wrap;">
        {% for score in scores %}
        <figure style="float: left; margin-right: 20px; margin-bottom:20px;">
            <img src="{{url_for('static', filename='dataset/'+dataset_folder+'/'+score[1])}}" height="200px">
            <figcaption>{{ score[0] }}</figcaption>
        </figure>
        {% endfor %}
        </div>
        {% if pagination.total_pages > 1 %}
            <ul class="pagination" style="text-align: center;">
                {% for page_num in range(1, pagination.total_pages + 1) %}
                    <a class="page-link" href="?page={{ page_num }}" style="margin: 3px;">{{ page_num }}</a>
                {% endfor %}
            </ul>
        {% endif %}
        {% endif %}
    </div>
</body>
</html>